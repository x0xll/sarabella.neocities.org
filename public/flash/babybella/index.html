<!DOCTYPE html>
<html>
    <head>
      <link rel="icon" href="/images/favicons/favicon.ico">
      <title data-il8n="game_babybella">Baby Bella</title>
        <script src="/ruffle/ruffle.js"></script>
        <link rel="stylesheet" href="/styles.css">
    </head>

    <script src="/language.js"></script>

    <body class="game" onload="loadLanguagePref(); setupUserDropdown()">
        <script src="/header.js"></script>
        
        <script>
          // Gets the correct swf file from url
          const searchQueryString = window.location.search;
          const urlParameters = new URLSearchParams(searchQueryString);
          dateOfFile = urlParameters.get('date')

          window.RufflePlayer = {
            config: {
              autoplay: "on",
            }
          };
        </script>

        <div class="swf" dir="ltr" rbidi="on"></div>

        <div id="footer" class="footer">
          <script src="/footer.js"></script>
          <script>
            generateFooter({customLinks1: [{href: '/flash/babybella/babybella_timeline.html', il8n: 'footer_timeline_link'}], wikiLink: 'https://bellasara.wiki.gg/wiki/%22Baby_Bella%22', webarchiveLink: 'https://web.archive.org/web/20081019193023/http://www.bellasara.com/babybella/index.aspx', githubLink: 'https://github.com/x0xll/sarabella.neocities.org/tree/main/public/flash/babybella'});
          </script>
        </div>

        <script src="/flags.js"></script>
<script src="/userManager.js"></script>

        <!-- Load correct localized version of the game -->
        <script>
          loadLanguagePref(false); 
          var locale = getCurrentLanguageCode();
          var swfParent = document.getElementsByClassName('swf')[0];
          var swfPlayer = document.createElement('embed');
          swfPlayer.height = '580';
          swfPlayer.width = '884';
          swfPlayer.pluginspage = 'http://www.macromedia.com/go/getflashplayer';

          if (!isLocalizedFileExisting(`./flash/babmini/lang/data_${locale}.xml`))
            locale = "en";

          let swf = './flash/babmini/babmini.swf';
          if (locale == 'ja')
            swf = './flash/babmini/babmini_ja.swf';

          swfPlayer.src = swf;
          swfPlayer.type = 'application/x-shockwave-flash';
          swfPlayer.setAttribute("flashvars", `language=${locale}&showVideo=true&wsdl=http://www.bellasara.com/BellaSara/poll.asmx?WSDL&babycode=9876-ABCD&date=${dateOfFile}&showFamilyReunion=true`);
          swfParent.appendChild(swfPlayer);
        </script>
  </body>
</html>
